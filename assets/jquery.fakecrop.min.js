(function(k){var e={ratio:function(b){var a=b.item;b=b.settings;return{w:a.width()/b.wrapperWidth,h:a.height()/b.wrapperHeight}},center:function(b,a){return parseInt((b-a)/2,10)},scaleToFill:function(b){var a=b.item,c=b.settings,d=c.ratio,f=a.width(),g=a.height(),h=0,e=0;d.h>d.w?(f=c.wrapperWidth,g/=d.w,c.center&&(h=(c.wrapperHeight-g)/2)):(g=c.wrapperHeight,f/=d.h,c.center&&(e=(c.wrapperWidth-f)/2));c.center&&(b.wrapper.css("position","relative"),a.css({position:"absolute",top:h+"px",left:e+"px"}));
return a.height(g).attr("height",g+"px").width(f).attr("width",f+"px")},scaleToFit:function(b){var a=b.item,c=b.settings,d=c.ratio;a.width();a.height();var f=0,g=0;if(d.h>d.w){var h=c.wrapperHeight;d=parseInt(a.width()*c.wrapperHeight/a.height(),10);c.center&&(g=(c.wrapperWidth-d)/2)}else h=parseInt(a.height()*c.wrapperWidth/a.width(),10),d=c.wrapperWidth,c.center&&(f=(c.wrapperHeight-h)/2);b.wrapper.css({width:(c.squareWidth?c.wrapperWidth:d)+"px",height:c.wrapperHeight+"px"});c.center&&(b.wrapper.css("position",
"relative"),a.css({position:"absolute",top:f+"px",left:g+"px"}));return a.height(h).attr("height",h+"px").width(d).attr("width",d+"px")},init:function(b){var a=k.extend({wrapperSelector:null,wrapperWidth:100,wrapperHeight:100,autoGetWidth:!0,ratioWrapper:null,widthSelector:null,center:!0,fill:!0,initClass:"fc-init",doneEvent:"fakedropdone",squareWidth:!0},b),c=function(){a.autoGetWidth&&(a.wrapperWidth=k(a.widthSelector).width(),a.wrapperHeight=a.wrapperWidth*a.ratioWrapper.ratio_height/a.ratioWrapper.ratio_width);
var b=k(this),c=a.wrapperSelector?b.closest(a.wrapperSelector):b.parent(),d={item:b,settings:a,wrapper:c};a.ratio=e.ratio(d);a.fill?(c.css({overflow:"hidden",width:a.wrapperWidth+"px",height:a.wrapperHeight+"px"}),e.scaleToFill(d)):e.scaleToFit(d);b.data("fc.settings",a).addClass(a.initClass).trigger(a.doneEvent)};b=this.filter("img");var d=this.filter(":not(img)");b.length&&b.bind("load",function(){c.call(this);this.style.display="inline"}).each(function(){if(this.complete||void 0===this.complete){var a=
this.src;this.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";this.src=a;this.style.display="none"}});d.length&&d.each(c);return this}};k.fn.fakecrop=function(b){if(e[b])return e[b].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof b&&b)k.error("Method "+b+" does not exist on jQuery.fakecrop");else return e.init.apply(this,arguments)}})(jQuery);
